<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experimental CMDB</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîó Experimental CMDB</h1>
            <p>Modern Configuration Management Database with Graph-based Correlation</p>
        </header>

        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="overview">Overview</button>
            <button class="tab-btn" data-tab="topology">Topology</button>
            <button class="tab-btn" data-tab="browse">Browse</button>
            <button class="tab-btn" data-tab="events">Events</button>
            <button class="tab-btn" data-tab="correlation">Correlation</button>
            <button class="tab-btn" data-tab="data-generation">Data Generation</button>
            <button class="tab-btn" data-tab="demo">Demo</button>
        </nav>

        <main>
            <!-- Overview Tab -->
            <div id="overview" class="tab-content active">
                <!-- System Status Section -->
                <div class="section">
                    <div class="section-header">
                        <h2>üîß System Status</h2>
                        <div class="section-actions">
                            <button id="refresh-system-status" class="secondary-btn">Refresh Status</button>
                        </div>
                    </div>

                    <!-- Environment Info -->
                    <div class="environment-status">
                        <div class="environment-card" id="environment-info">
                            <div class="environment-header">
                                <span class="environment-mode" id="env-mode">Unknown</span>
                                <span class="environment-status-indicator" id="env-status">‚óè</span>
                            </div>
                            <div class="environment-details">
                                <div class="env-detail">
                                    <span class="env-label">Version:</span>
                                    <span class="env-value" id="app-version">-</span>
                                </div>
                                <div class="env-detail">
                                    <span class="env-label">Runtime:</span>
                                    <span class="env-value" id="runtime-info">-</span>
                                </div>
                                <div class="env-detail">
                                    <span class="env-label">Uptime:</span>
                                    <span class="env-value" id="system-uptime">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Services Grid -->
                    <div class="services-grid" id="services-grid">
                        <div class="loading">Loading system status...</div>
                    </div>

                    <!-- Performance Summary -->
                    <div class="performance-summary" id="performance-summary" style="display: none;">
                        <h4>Performance</h4>
                        <div class="perf-metrics">
                            <div class="perf-item">
                                <span class="perf-label">Response Time:</span>
                                <span class="perf-value" id="perf-response-time">-</span>
                            </div>
                            <div class="perf-item">
                                <span class="perf-label">Memory Usage:</span>
                                <span class="perf-value" id="perf-memory">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <div class="section-header">
                        <h2>üìä Database Statistics</h2>
                        <div class="section-actions">
                            <button id="refresh-db-stats" class="secondary-btn">Refresh</button>
                            <button id="clear-database" class="danger-btn">Clear All Data</button>
                        </div>
                    </div>
                </div>

                <!-- Core Metrics -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Nodes</h3>
                        <div class="stat-value" id="total-nodes">-</div>
                        <div class="stat-detail">All graph nodes</div>
                    </div>
                    <div class="stat-card">
                        <h3>Total Relationships</h3>
                        <div class="stat-value" id="total-relationships">-</div>
                        <div class="stat-detail">Graph edges</div>
                    </div>
                    <div class="stat-card">
                        <h3>Configuration Items</h3>
                        <div class="stat-value" id="ci-count">-</div>
                        <div class="stat-detail">Infrastructure components</div>
                    </div>
                    <div class="stat-card">
                        <h3>Events</h3>
                        <div class="stat-value" id="event-count">-</div>
                        <div class="stat-detail">System events</div>
                    </div>
                </div>

                <!-- Detailed Breakdowns -->
                <div class="section">
                    <h3>Node Type Distribution</h3>
                    <div id="node-types-chart" class="chart-container">
                        <div class="loading">Loading node types...</div>
                    </div>
                </div>

                <div class="section">
                    <h3>Relationship Type Distribution</h3>
                    <div id="relationship-types-chart" class="chart-container">
                        <div class="loading">Loading relationship types...</div>
                    </div>
                </div>

                <div class="section">
                    <h3>Performance Metrics</h3>
                    <div class="metrics-grid">
                        <div class="metric-item">
                            <span class="metric-label">Query Response Time:</span>
                            <span class="metric-value" id="query-time">-</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Recent Activity (1h):</span>
                            <span class="metric-value" id="recent-activity">-</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Database Updated:</span>
                            <span class="metric-value" id="last-updated">-</span>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Topology Tab -->
            <div id="topology" class="tab-content">
                <div class="toolbar">
                    <button id="refresh-topology">Refresh</button>
                    <select id="topology-filter">
                        <option value="">All Components (Limited)</option>
                        <option value="Server" selected>Servers</option>
                        <option value="Database">Databases</option>
                        <option value="WebApplication">Web Applications</option>
                        <option value="BusinessService">Business Services</option>
                        <option value="Region">Regions</option>
                        <option value="DataCenter">Data Centers</option>
                    </select>
                    <button id="reset-zoom">Reset Zoom</button>
                </div>
                <div id="topology-viz" class="visualization">
                    <div class="loading">Loading topology...</div>
                </div>
            </div>

            <!-- Browse Tab -->
            <div id="browse" class="tab-content">
                <div class="section">
                    <div class="section-header">
                        <h2>üìã Configuration Items Browser</h2>
                        <div class="section-actions">
                            <button id="refresh-browse" class="secondary-btn">Refresh</button>
                        </div>
                    </div>
                </div>

                <!-- Search and Filter Controls -->
                <div class="browse-controls">
                    <div class="search-controls">
                        <div class="control-group">
                            <label for="ci-search">Search:</label>
                            <input type="text" id="ci-search" placeholder="Search by name or properties..." class="search-input">
                        </div>
                        <div class="control-group">
                            <label for="ci-type-filter">Type:</label>
                            <select id="ci-type-filter" class="filter-select">
                                <option value="">All Types</option>
                                <option value="Server">Servers</option>
                                <option value="Database">Databases</option>
                                <option value="WebApplication">Web Applications</option>
                                <option value="BusinessService">Business Services</option>
                                <option value="Region">Regions</option>
                                <option value="DataCenter">Data Centers</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <button id="clear-filters" class="secondary-btn">Clear Filters</button>
                        </div>
                    </div>
                </div>

                <!-- Results Summary -->
                <div class="browse-summary">
                    <div class="summary-info">
                        <span id="results-count">Loading...</span>
                        <span id="total-count" class="total-indicator"></span>
                    </div>
                    <div class="view-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-relationships" checked />
                            <span class="checkmark"></span>
                            Show Relationships
                        </label>
                    </div>
                </div>

                <!-- CI Table -->
                <div class="ci-table-container">
                    <table class="ci-table">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="name">Name</th>
                                <th class="sortable" data-sort="type">Type</th>
                                <th class="sortable" data-sort="status">Status</th>
                                <th>Relationships</th>
                                <th class="sortable" data-sort="updatedAt">Last Updated</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ci-table-body">
                            <tr>
                                <td colspan="6" class="loading-row">
                                    <div class="loading">Loading configuration items...</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Pagination Controls -->
                <div class="pagination-container">
                    <div class="pagination-info">
                        <span id="pagination-info">Page 1 of 1</span>
                    </div>
                    <div class="pagination-controls">
                        <button id="first-page" class="pagination-btn" disabled>First</button>
                        <button id="prev-page" class="pagination-btn" disabled>Previous</button>
                        <span class="page-numbers" id="page-numbers"></span>
                        <button id="next-page" class="pagination-btn" disabled>Next</button>
                        <button id="last-page" class="pagination-btn" disabled>Last</button>
                    </div>
                    <div class="pagination-size">
                        <label for="page-size">Items per page:</label>
                        <select id="page-size">
                            <option value="50">50</option>
                            <option value="100">100</option>
                            <option value="200" selected>200</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Events Tab -->
            <div id="events" class="tab-content">
                <div class="toolbar">
                    <select id="severity-filter">
                        <option value="">All Severities</option>
                        <option value="CRITICAL">Critical</option>
                        <option value="HIGH">High</option>
                        <option value="MEDIUM">Medium</option>
                        <option value="LOW">Low</option>
                        <option value="INFO">Info</option>
                    </select>
                    <button id="refresh-events">Refresh</button>
                    <button id="clear-events" class="warning-btn">Clear All Events</button>
                </div>

                <!-- Event Simulation Section -->
                <div class="section">
                    <h3>üé≠ Event Simulation</h3>
                    <div class="simulation-controls">
                        <div class="control-group">
                            <button id="simulate-event" class="primary-btn">Simulate Single Event</button>
                            <button id="create-incident" class="secondary-btn">Create Sample Incident</button>
                        </div>
                        <div class="control-group">
                            <button id="simulate-cascade" class="warning-btn">Simulate Cascade Failure</button>
                            <span class="help-text">Generates realistic cascade failure events for correlation testing</span>
                        </div>
                    </div>
                </div>

                <div id="events-list" class="events-list">
                    <div class="loading">Loading events...</div>
                </div>
            </div>

            <!-- Correlation Tab -->
            <div id="correlation" class="tab-content">
                <!-- Correlation Analysis Header -->
                <div class="section">
                    <h2>üîç Event Correlation Analysis</h2>
                    <div class="analysis-info">
                        <p><strong>Purpose:</strong> This tool finds relationships between IT events to help identify root causes, predict failures, and understand system dependencies.</p>
                        <div class="correlation-status" id="correlation-status">
                            <div class="status-item">
                                <span class="status-label">System Status:</span>
                                <span class="status-value" id="system-status">Loading...</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Last Analysis:</span>
                                <span class="status-value" id="last-analysis">Never</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Data Readiness Check -->
                <div class="section">
                    <h3>üìä Data Readiness</h3>
                    <div id="data-readiness" class="data-readiness">
                        <div class="readiness-item">
                            <span class="readiness-label">Total Events:</span>
                            <span class="readiness-value" id="total-events">-</span>
                        </div>
                        <div class="readiness-item">
                            <span class="readiness-label">Events with CI Links:</span>
                            <span class="readiness-value" id="linked-events">-</span>
                        </div>
                        <div class="readiness-item">
                            <span class="readiness-label">Recent Events (1h):</span>
                            <span class="readiness-value" id="recent-events">-</span>
                        </div>
                        <div class="readiness-item">
                            <span class="readiness-label">Correlation Ready:</span>
                            <span class="readiness-status" id="correlation-ready">Checking...</span>
                        </div>
                    </div>
                    <button id="check-data-readiness" class="secondary-btn">üîÑ Refresh Data Status</button>
                </div>

                <!-- Correlation Controls -->
                <div class="section">
                    <h3>‚ö° Correlation Analysis</h3>
                    <div class="correlation-controls">
                        <div class="control-row">
                            <div class="control-group">
                                <label for="time-window">Analysis Time Window:</label>
                                <select id="time-window">
                                    <option value="15m">Last 15 minutes</option>
                                    <option value="1h" selected>Last hour</option>
                                    <option value="6h">Last 6 hours</option>
                                    <option value="24h">Last 24 hours</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="correlation-threshold">Correlation Threshold:</label>
                                <select id="correlation-threshold">
                                    <option value="0.1">Low (0.1) - Show weak correlations</option>
                                    <option value="0.3">Medium (0.3) - Show moderate correlations</option>
                                    <option value="0.5" selected>High (0.5) - Show strong correlations</option>
                                    <option value="0.7">Very High (0.7) - Show only strongest correlations</option>
                                </select>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button id="find-correlations" class="primary-btn">
                                üîç Find Event Correlations
                                <span class="btn-subtitle">Analyze temporal and topological relationships</span>
                            </button>
                            <button id="analyze-business-impact" class="secondary-btn">
                                üíº Analyze Business Impact
                                <span class="btn-subtitle">Map events to business services</span>
                            </button>
                            <button id="create-test-events" class="secondary-btn">
                                ‚ö° Create Test Events
                                <span class="btn-subtitle">Generate correlated events for testing</span>
                            </button>
                        </div>

                        <div id="analysis-progress" class="analysis-progress" style="display: none;">
                            <div class="progress-header">
                                <span id="progress-title">Running Analysis...</span>
                                <span id="progress-status">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div id="progress-fill" class="progress-fill"></div>
                            </div>
                            <div id="progress-message" class="progress-message">Starting analysis...</div>
                        </div>
                    </div>
                </div>

                <!-- Results Grid -->
                <div class="correlation-grid">
                    <div class="section">
                        <h3>üîó Event Correlations</h3>
                        <div id="correlations-list" class="correlations">
                            <div class="empty-state">
                                <p>No correlations found. Click "Find Event Correlations" to analyze current events.</p>
                                <div class="help-text">
                                    <strong>Tip:</strong> Correlations work best when you have:
                                    <ul>
                                        <li>Multiple recent events (within the time window)</li>
                                        <li>Events linked to Configuration Items</li>
                                        <li>Events on related infrastructure components</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <h3>üíº Business Impact</h3>
                        <div id="business-impact" class="business-impact">
                            <div class="empty-state">
                                <p>No business impact data. Click "Analyze Business Impact" to assess service impact.</p>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <h3>üìà Pattern Analysis</h3>
                        <div id="patterns" class="patterns">
                            <div class="empty-state">
                                <p>Pattern analysis shows recurring issues. This loads automatically when the tab opens.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Debug Information (Collapsible) -->
                <div class="section">
                    <h3>üêõ Diagnostic Information</h3>
                    <button id="toggle-debug" class="secondary-btn">Show Debug Details</button>
                    <div id="debug-info" class="debug-info" style="display: none;">
                        <div class="debug-section">
                            <h4>Raw Debug Data</h4>
                            <pre id="debug-output">Click "Show Debug Details" to view system diagnostics...</pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Data Generation Tab -->
            <div id="data-generation" class="tab-content">
                <div class="section">
                    <h2>Scalable Data Generation</h2>
                    <p>Generate enterprise-scale CMDB data using distributed workers with real-time progress tracking.</p>

                    <div class="data-gen-controls">
                        <div class="scale-selection">
                            <h3>Select Data Scale</h3>
                            <div id="scale-options" class="scale-grid">
                                <!-- Scale options will be loaded dynamically -->
                            </div>
                        </div>

                        <div class="job-controls">
                            <div class="generation-options">
                                <h4>Generation Options</h4>
                                <div class="option-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="clear-existing-data" />
                                        <span class="checkmark"></span>
                                        Clear existing data before generation
                                    </label>
                                    <div class="option-help">
                                        ‚ö†Ô∏è Warning: This will permanently delete all existing CIs, events, and relationships
                                    </div>
                                </div>
                            </div>
                            <button id="start-generation" class="primary-btn" disabled>Start Data Generation</button>
                            <button id="cancel-current-job" class="danger-btn" style="display: none;">Cancel Job</button>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Queue Statistics</h2>
                    <div class="stats-grid" id="queue-stats">
                        <div class="stat-card">
                            <h3>Active Jobs</h3>
                            <div class="stat-value" id="active-jobs">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Queued Jobs</h3>
                            <div class="stat-value" id="queued-jobs">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Completed Jobs</h3>
                            <div class="stat-value" id="completed-jobs">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Failed Jobs</h3>
                            <div class="stat-value critical" id="failed-jobs">0</div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Current Job Progress</h2>
                    <div id="job-progress-container" style="display: none;">
                        <div class="job-info">
                            <h3 id="current-job-title">No active job</h3>
                            <div class="job-meta">
                                <span id="job-scale"></span>
                                <span id="job-status" class="status-badge"></span>
                            </div>
                        </div>

                        <div class="progress-section">
                            <div class="progress-info">
                                <span id="progress-stage">Idle</span>
                                <span id="progress-percentage">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div id="progress-fill" class="progress-fill"></div>
                            </div>
                            <div id="progress-message" class="progress-message">Waiting for job...</div>
                        </div>

                        <div id="progress-details" class="progress-details">
                            <div class="detail-item">
                                <span>Estimated Duration:</span>
                                <span id="estimated-duration">-</span>
                            </div>
                            <div class="detail-item">
                                <span>Started:</span>
                                <span id="job-started">-</span>
                            </div>
                            <div class="detail-item">
                                <span>Total CIs:</span>
                                <span id="total-cis">-</span>
                            </div>
                        </div>
                    </div>

                    <div id="no-job-message" class="empty-state">
                        <p>No active data generation job. Select a scale and start generation to monitor progress.</p>
                    </div>
                </div>

                <div class="section">
                    <h2>Job History</h2>
                    <div id="job-history" class="job-list">
                        <div class="loading">Loading job history...</div>
                    </div>
                </div>
            </div>

            <!-- Demo Tab -->
            <div id="demo" class="tab-content">
                <div class="section">
                    <h2>Demo Controls</h2>
                    <div class="demo-info">
                        <p><strong>Demo Focus:</strong> This tab demonstrates graph database advantages for dependency analysis. Use the Data Generation tab to load data, Events tab for event simulation, and this tab for impact analysis.</p>
                    </div>
                </div>

                <!-- Graph Database Advantages Demo -->
                <div class="section">
                    <h2>üîó Graph Database Advantages Demo</h2>
                    <p class="demo-description">
                        Experience firsthand how graph databases excel at multi-hop dependency analysis compared to traditional SQL approaches.
                        Select a component below to see real-time impact blast radius calculation with business revenue impact.
                    </p>

                    <!-- Demo Scenario Selector -->
                    <div class="demo-scenarios">
                        <h3>Pre-configured Scenarios</h3>
                        <div class="scenario-grid" id="scenario-grid">
                            <div class="loading">Loading demo scenarios...</div>
                        </div>
                    </div>

                    <!-- Interactive Impact Analysis -->
                    <div class="impact-analysis-panel">
                        <h3>Custom Impact Analysis</h3>
                        <div class="analysis-controls">
                            <div class="control-group">
                                <label for="component-selector">Component:</label>
                                <select id="component-selector">
                                    <option value="">Select a component...</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="analysis-direction">Direction:</label>
                                <select id="analysis-direction">
                                    <option value="downstream">Downstream Impact</option>
                                    <option value="upstream">Upstream Dependencies</option>
                                    <option value="both">Both Directions</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="max-depth">Max Depth:</label>
                                <input type="range" id="max-depth" min="1" max="6" value="4" class="depth-slider">
                                <span id="depth-value">4</span> hops
                            </div>
                            <button id="run-impact-analysis" class="primary-btn">Run Impact Analysis</button>
                        </div>
                    </div>

                    <!-- Results Display -->
                    <div class="impact-results" id="impact-results" style="display: none;">
                        <h3>Impact Analysis Results</h3>

                        <!-- Summary Cards -->
                        <div class="impact-summary">
                            <div class="summary-card">
                                <h4>Affected Components</h4>
                                <div class="summary-value" id="affected-count">-</div>
                            </div>
                            <div class="summary-card critical">
                                <h4>Critical Impacts</h4>
                                <div class="summary-value" id="critical-impacts">-</div>
                            </div>
                            <div class="summary-card revenue">
                                <h4>Revenue at Risk</h4>
                                <div class="summary-value" id="revenue-at-risk">-</div>
                            </div>
                            <div class="summary-card performance">
                                <h4>Query Time</h4>
                                <div class="summary-value" id="query-time">-</div>
                            </div>
                        </div>

                        <!-- Dependency Chain Visualization -->
                        <div class="dependency-chains">
                            <h4>Dependency Impact Chains</h4>
                            <div id="dependency-list" class="dependency-list">
                                <!-- Populated dynamically -->
                            </div>
                        </div>

                        <!-- Graph Advantage Highlight -->
                        <div class="graph-advantage-highlight">
                            <h4>üöÄ Graph Database Advantage</h4>
                            <div id="advantage-description" class="advantage-text">
                                <!-- Populated dynamically -->
                            </div>
                        </div>
                    </div>

                    <!-- Query Comparison Panel -->
                    <div class="query-comparison" id="query-comparison" style="display: none;">
                        <h3>Query Comparison: Cypher vs SQL</h3>
                        <div class="comparison-panels">
                            <div class="query-panel cypher-panel">
                                <h4>Neo4j Cypher Query</h4>
                                <div class="query-metrics">
                                    <span class="metric">Lines: <span id="cypher-lines">-</span></span>
                                    <span class="metric">Complexity: <span id="cypher-complexity">-</span></span>
                                </div>
                                <pre id="cypher-query" class="query-code"></pre>
                            </div>
                            <div class="query-panel sql-panel">
                                <h4>SQL Equivalent</h4>
                                <div class="query-metrics">
                                    <span class="metric">Lines: <span id="sql-lines">-</span></span>
                                    <span class="metric">Complexity: <span id="sql-complexity">-</span></span>
                                </div>
                                <pre id="sql-query" class="query-code"></pre>
                            </div>
                        </div>
                        <div class="comparison-advantages">
                            <h4>Practical Advantages</h4>
                            <div id="advantages-list" class="advantages-grid">
                                <!-- Populated dynamically -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>About This Demo</h2>
                    <div class="demo-info">
                        <p>This concept application demonstrates modern CMDB capabilities with graph database advantages:</p>
                        <ul>
                            <li><strong>Graph Database:</strong> Neo4j for dynamic relationship modeling and multi-hop traversal</li>
                            <li><strong>AI Correlation:</strong> Automated event correlation using graph algorithms</li>
                            <li><strong>Impact Analysis:</strong> Real-time blast radius calculation with business impact</li>
                            <li><strong>Performance:</strong> Sub-second analysis of complex 6-hop dependency chains</li>
                            <li><strong>Business Value:</strong> Revenue impact calculation and risk assessment</li>
                        </ul>

                        <h3>Graph Database vs Traditional SQL:</h3>
                        <ul>
                            <li><strong>Variable-depth traversal:</strong> Simple parameter change vs complex query rewriting</li>
                            <li><strong>Performance:</strong> Consistent fast execution vs exponential degradation</li>
                            <li><strong>Maintainability:</strong> Intuitive graph queries vs complex recursive CTEs</li>
                            <li><strong>Business logic:</strong> Native relationship properties vs junction table complexity</li>
                            <li><strong>Real-time usage:</strong> Safe for production vs performance impact concerns</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- CI Detail Modal -->
    <div id="ci-detail-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="ci-detail-title">Configuration Item Details</h2>
                <div class="modal-actions">
                    <button id="refresh-ci-detail" class="secondary-btn">Refresh</button>
                    <button id="close-ci-detail" class="close-btn">&times;</button>
                </div>
            </div>

            <div class="modal-body">
                <div class="ci-detail-loading">
                    <div class="loading">Loading configuration item details...</div>
                </div>

                <div class="ci-detail-content" style="display: none;">
                    <!-- CI Basic Information -->
                    <div class="detail-section">
                        <h3>Basic Information</h3>
                        <div class="detail-grid">
                            <div class="detail-item">
                                <label>Name:</label>
                                <span id="detail-name">-</span>
                            </div>
                            <div class="detail-item">
                                <label>ID:</label>
                                <span id="detail-id" class="detail-id">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Type:</label>
                                <span id="detail-type" class="ci-type">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Status:</label>
                                <span id="detail-status" class="ci-status">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Created:</label>
                                <span id="detail-created">-</span>
                            </div>
                            <div class="detail-item">
                                <label>Updated:</label>
                                <span id="detail-updated">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- CI Properties -->
                    <div class="detail-section">
                        <h3>Properties</h3>
                        <div id="detail-properties" class="properties-list">
                            <!-- Properties will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Relationships Section -->
                    <div class="detail-section">
                        <div class="section-header">
                            <h3>Relationships</h3>
                            <div class="relationship-controls">
                                <button id="refresh-relationships" class="secondary-btn">Refresh</button>
                            </div>
                        </div>
                        <div id="detail-relationships" class="relationships-section">
                            <!-- Relationships will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Topology Visualization -->
                    <div class="detail-section">
                        <div class="section-header">
                            <h3>Relationship Diagram</h3>
                            <div class="topology-controls">
                                <label for="topology-depth">Depth:</label>
                                <select id="topology-depth">
                                    <option value="1">1 hop</option>
                                    <option value="2" selected>2 hops</option>
                                    <option value="3">3 hops</option>
                                    <option value="4">4 hops</option>
                                    <option value="5">5 hops</option>
                                </select>
                                <button id="refresh-topology" class="secondary-btn">Refresh</button>
                                <button id="reset-topology-zoom" class="secondary-btn">Reset Zoom</button>
                                <button id="fullscreen-topology" class="secondary-btn"><i class="fas fa-expand"></i> Fullscreen</button>
                            </div>
                        </div>
                        <div id="detail-topology" class="detail-topology">
                            <div class="loading">Loading relationship diagram...</div>
                        </div>
                    </div>
                </div>

                <div class="ci-detail-error" style="display: none;">
                    <div class="error">Failed to load configuration item details</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Debug Logger Terminal -->
    <div id="debug-logger" class="debug-logger hidden">
        <div class="debug-header">
            <div class="debug-title">
                <span class="debug-icon">üìä</span>
                <span>Debug Console</span>
            </div>
            <div class="debug-controls">
                <button id="clear-logs" class="debug-btn">Clear</button>
                <button id="toggle-logger" class="debug-btn">Hide</button>
            </div>
        </div>
        <div class="debug-content" id="debug-content">
            <div class="debug-welcome">
                <div class="debug-line">
                    <span class="debug-timestamp">[INIT]</span>
                    <span class="debug-level info">INFO</span>
                    <span class="debug-message">Debug console initialized - monitoring CMDB operations</span>
                </div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="js/debug-logger.js"></script>
    <script src="js/ci-detail-modal.js"></script>
    <script src="js/browse.js"></script>
    <script src="js/app.js"></script>
    <script src="js/topology-simple.js"></script>
    <script src="js/correlation.js"></script>
    <script src="js/dataGeneration.js"></script>
    <script src="js/graph-advantages-demo.js"></script>

    <script>
        // Initialize application components after all scripts load
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // Initialize simple topology
                window.TopologyViz = new SimpleTopology();

                // Initialize demo
                window.GraphDemo = new GraphAdvantagesDemo();

                // Initialize main app
                window.cmdbApp = new CMDBApp();

                if (window.logInfo) {
                    window.logInfo('All CMDB components initialized successfully');
                }
            } catch (error) {
                console.error('Failed to initialize CMDB components:', error);
                if (window.logError) {
                    window.logError('Component initialization failed', { error: error.message });
                }
            }
        });
    </script>
</body>
</html>